<!doctype html>
<html lang="" style="width: 100%; height: 100%; margin: 0">
	<head>
		<title>The King's Affair</title>

		<meta name="viewport" content= "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<script src="https://d3js.org/d3.v7.min.js"></script>
		<script src="javascript/ka.min.js"></script>

		<link rel="stylesheet" href="css/ka.css" />

		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Yatra+One&display=swap" rel="stylesheet">
	</head>

	<body style="width: 100%; height: 100%; margin: 0; overflow-x: hidden;">

		<div id="canvas" class="canvas">

			<img class="title" src="assets/titlephone.3000x1349.png"/>
			<img class="title" src="assets/titledesktop.3000x577.png"/>


				<!--
		 ________________________________________
		/ And thus spoke the villain "Thou shalt \
		| populate thine card faces within the   |
		| index file!" and all fell silent with  |
		\ sorrow...                              /
		 ----------------------------------------
				\   ^__^
				 \  (--)\_______
					(__)\       )\/\
						||----w |
						||     ||
				-->

			<div class="card first" id="card-outer first">
					<div class="card-inner first" id="card-inner first">
							<div class="card-back first" id="card-back first">
									<img class="card-img first" id="card-img first" src="https://d2oaifmaxam9sv.cloudfront.net/assets/back.smaller.png">
							</div>
							<div class="card-face first" id="card-face first">

								<img class="card-img first" src="faces/8.png">

								<div id="countdown-wrapper" class="countdown-wrapper">
									<p class="countdown-text days"><span class="countdown-number days"></span> Days</p>
									<p class="countdown-text hours"><span class="countdown-number hours"></span> Hours</p>
									<p class="countdown-text mins"><span class="countdown-number mins"></span> Minutes</p>
									<p class="countdown-text secs"><span class="countdown-number secs"></span> Seconds</p>
								</div>

							</div>
					</div>
			</div>


			<div class="card second" id="card-outer second">
					<div class="card-inner second" id="card-inner second">
							<div class="card-back second" id="card-back second">
									<img class="card-img second" id="card-img second" src="https://d2oaifmaxam9sv.cloudfront.net/assets/back.smaller.png">
							</div>
							<div class="card-face second" id="card-face second">

								<img class="card-img second" src="faces/7.png">

								<!--Template Me-->

							</div>
					</div>
			</div>


			<div class="card third" id="card-outer third">
					<div class="card-inner third" id="card-inner third">
							<div class="card-back third" id="card-back third">
									<img class="card-img third" id="card-img third" src="https://d2oaifmaxam9sv.cloudfront.net/assets/back.smaller.png">
							</div>
							<div class="card-face third" id="card-face third">

								<img class="card-img third" src="faces/6.png">

								<!--Template Me-->

							</div>
					</div>
			</div>


			<div class="card fourth" id="card-outer fourth">
					<div class="card-inner fourth" id="card-inner fourth">
							<div class="card-back fourth" id="card-back fourth">
									<img class="card-img fourth" id="card-img fourth" src="https://d2oaifmaxam9sv.cloudfront.net/assets/back.smaller.png">
							</div>
							<div class="card-face fourth" id="card-face fourth">

								<img class="card-img fourth" src="faces/5.png">

								<!--Template Me-->

							</div>
					</div>
			</div>


			<div class="card fifth" id="card-outer fifth">
					<div class="card-inner fifth" id="card-inner fifth">
							<div class="card-back fifth" id="card-back fifth">
									<img class="card-img fifth" id="card-img fifth" src="https://d2oaifmaxam9sv.cloudfront.net/assets/back.smaller.png">
							</div>
							<div class="card-face fifth" id="card-face fifth">

								<img class="card-img fifth" src="faces/4.png">

								<!--Template Me-->

							</div>
					</div>
			</div>


			<div class="card sixth" id="card-outer sixth">
					<div class="card-inner sixth" id="card-inner sixth">
							<div class="card-back sixth" id="card-back sixth">
									<img class="card-img sixth" id="card-img sixth" src="https://d2oaifmaxam9sv.cloudfront.net/assets/back.smaller.png">
							</div>
							<div class="card-face sixth" id="card-face sixth">

								<img class="card-img sixth" src="faces/3.png">

								<!--Template Me-->

							</div>
					</div>
			</div>


			<div class="card seventh" id="card-outer seventh">
					<div class="card-inner seventh" id="card-inner seventh">
							<div class="card-back seventh" id="card-back seventh">
									<img class="card-img seventh" id="card-img seventh" src="https://d2oaifmaxam9sv.cloudfront.net/assets/back.smaller.png">
							</div>
							<div class="card-face seventh" id="card-face seventh">

								<img class="card-img seventh" src="faces/2.png">

								<!--Template Me-->

							</div>
					</div>
			</div>


			<div class="card eighth" id="card-outer eighth">
					<div class="card-inner eighth" id="card-inner eighth">
							<div class="card-back eighth" id="card-back eighth">
									<img class="card-img eighth" id="card-img eighth" src="https://d2oaifmaxam9sv.cloudfront.net/assets/back.smaller.png">
							</div>
							<div class="card-face eighth" id="card-face eighth">

								<img class="card-img eighth" src="faces/1.png">

								<!--Template Me-->

							</div>
					</div>
			</div>

		</div>

		<div id="popup-canvas" class="popup-canvas">
			<p id="popup-close" class="popup-close">
				Close
			</p>
			<div id="popup" class="popup">

			</div>
		</div>

		<template id="popup-about-content">
			<!-- Template me -->
			<p style="padding: 20px; font-size: 40px;">Lots of content in a popup... where we intend to put the about page</p>
			<br>
			<img src="assets/titlephone.3000x1349.png" style="width: 100%; background: grey;">
			<br>
			<p style="padding: 20px; font-size: 40px;">Wow, such content</p>
			<br>
			<img src="assets/titlephone.3000x1349.png" style="width: 100%; background: grey;">
			<br>
			<p style="padding: 20px; font-size: 40px;">End of content</p>
		</template>





		<script>

			window.onload = () =>
			{
				/* Card size and margin */
				const cardSize = new Vec ( 800, 1120 );
				const cardMargin = cardSize.mult ( 0.1 );

				/* Title sizes */
				const mobileTitleSize = new Vec ( 3000, 1349 );
				const desktopTitleSize = new Vec ( 3000, 577 );

				/* Create a card face manager */
				const cardFaceManager = new CardFaceManager ( d3.selectAll ( ".card" ) );

				/* The number of cards that should flip */
				const numFlips = 8;

				/* Create the grid manager */
				const gridManager = new GridManager (
					d3.select ( "#canvas" ),
					d3.selectAll ( ".card" ),
					d3.selectAll ( ".title" ),
					cardSize,
					cardSize.mult ( new Vec ( 0.1, 0.1 ) ),
					[ mobileTitleSize, desktopTitleSize ],
					[ 1, 2, 4 ],
					() => cardFaceManager.flip ( numFlips ) );

				/* Create the popup manager */
				const popupManager = new PopupManager (
					d3.select ( "#popup-canvas" ),
					d3.select ( "#popup" ),
					d3.select ( "#popup-close" ),
					gridManager );

				/* About popup */
				if ( numFlips >= 3 )
					d3.select ( ".card-face.third" ).on ( "click", () =>
						popupManager.openPopup ( document.getElementById ( "popup-about-content" ).content.cloneNode ( true ) ) );

				/* Dynamically size the countdown */
				setTimeout ( () => fitText ( document.getElementsByClassName ( "countdown-text" ), 0.8 ) );

				/* Create the countdown */
				setupCountdown (
					"2023-02-20T00:00:00.000Z",
					d3.select ( ".countdown-number.days" ),
					d3.select ( ".countdown-number.hours" ),
					d3.select ( ".countdown-number.mins" ),
					d3.select ( ".countdown-number.secs" ) )
			}

		</script>

	</body>
</html>